<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title> Search Bar </title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
</head>

<!-- <body>
    <center>
        <input id="file-input" type="file"/>
    </center>

</body> -->

<body>
    <div id="root"></div>

    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">
        class Element extends React.Component{
         
            state = {file: "", input:"", words:"", suggestions:[]};
            
            changeState = (object) => {
                console.log(this);
             // this.setState(object);

            };

            handleFile = (event) => {
    
                var fileInput = event.target;

                
                var reader = new FileReader();

                reader.readAsText(fileInput.files[0]);
                
                reader.onload = (event) => {
               
                this.setState({file:reader});
                this.state.words = this.state.file.result.split(" ");
                this.setState({suggestions:this.state.words});
                };  

            }


            handleKeyPress = (event) => {
               
                var textInput = event.target;

                if(event.key == "Enter"){
                
                var word = textInput.value;
                console.log(this.state);
                 var content = this.state.file.result;
                // console.log(this.state);
                 if(content.indexOf(word) != -1 && word != "") {
                    console.log("it's here!");
                } else {
                    console.log("not here");
                } 
                
                }
            }

            handleChange = (event) => {
                var text = event.target.value;
              
                this.setState({input:text}, () => {
                
                    var sugg = this.state.words.filter(word => {
                        return word.indexOf(this.state.input) === 0;
                    });

                  this.setState({suggestions:sugg});

                });
                
                

            }

            handleClick = () => {
                document.getElementById("fileInput").click();
            }
            
            
      
        render(){  
            const labelStyle = {
                color: 'blue'
            };

            const titleStyle = {
                marginTop: '30px',
                color: '#555',
                fontSize: '60px'
               
            }

            const fileBtnStyle = {
                marginTop: '20px',
                width: '200px',
                fontSize: '30px'
            };

            const searchBarStyle = {
                marginTop: '30px',
                width: '400px',
                fontSize: '30px'
            };
            
            const divStyle = {
              fontFamily:'Helvetica-Light'
            };

            const invisible = {
                display: 'none'
            };
            

            
            var suggestions = this.state.suggestions.map(function(suggestion) {
                    return  <p> {suggestion} </p>;
                });
             
            return (
                <div style={divStyle}>
                <center>
                    <h1 style={titleStyle}> Welcome to Search Bar ! :) </h1>
                </center>
               <center>
                 <input id="fileInput" type="file" style={invisible} onChange={this.handleFile}/>
                 <button id="fileBtn" className="btn btn-dark" onClick={this.handleClick} style={fileBtnStyle}> Choose File </button>
               </center>
               <center>
                <input id="searchBar" type="input" style={searchBarStyle} onKeyPress={this.handleKeyPress} onChange={this.handleChange}/>
                {suggestions}
                </center>
                
                </div>
                
            );
    
            }
        }
         const element = <Element />
         ReactDOM.render(
            element,
            document.getElementById('root')
        );
        </script>
</body>

</html>